# cfwé¢„å¤„ç†é…ç½®æ–‡ä»¶ï¼Œæ›´æ–°è®¢é˜…æ—¶è‡ªåŠ¨åˆå¹¶ï¼Œè¯·ç¡®ä¿æ²¡æœ‰å¼€å¯diffã€‚
# æ­¤é…ç½®æ²¡æœ‰è¿›è¡Œåœ°åŒºåŒºåˆ†ï¼Œåªå¯¹å¸¸ç”¨æœåŠ¡è¿›è¡Œå•ç‹¬åˆ†æµã€‚
# ä½œè€… walls1717
# æœ€åæ›´æ–°æ—¶é—´ 2023-01-21 14:44
#
# ä¿®å¤å¯èƒ½å‡ºç°çš„Advertising Deadline BUG
#
#=========================

parsers: # array
  - reg: ^.*$
    code: |
      module.exports.parse = (raw, { yaml }) => {
        const rawObj = yaml.parse(raw)
        const groups = []
        const rules = []
        return yaml.stringify({ ...rawObj, 'proxy-groups': groups, rules })
      }
    yaml:
      prepend-proxy-groups: # å»ºç«‹ç­–ç•¥ç»„
        - name: ğŸ”°å›½å¤–æµé‡
          type: select

        - name: âš“ï¸å…¶ä»–æµé‡
          type: select
          proxies:
            - ğŸ”°å›½å¤–æµé‡
            - ğŸš€ç›´æ¥è¿æ¥

        - name: ğŸ¬YouTube
          type: select

        - name: ğŸ¬Spotify
          type: select

        - name: ğŸ¬å›½å¤–åª’ä½“
          type: select

        - name: ğŸè‹¹æœæœåŠ¡
          type: select
          proxies:
            - ğŸš€ç›´æ¥è¿æ¥
            - ğŸ”°å›½å¤–æµé‡

        - name: ğŸ’»å¾®è½¯æœåŠ¡
          type: select
          proxies:
            - ğŸš€ç›´æ¥è¿æ¥
            - ğŸ”°å›½å¤–æµé‡

        - name: ğŸš€ç›´æ¥è¿æ¥
          type: select
          proxies:
            - DIRECT

      commands:
        - proxy-groups.ğŸ”°å›½å¤–æµé‡.proxies=[]proxyNames|^.*$
        - proxy-groups.ğŸ¬YouTube.proxies=[]proxyNames|^.*$
        - proxy-groups.ğŸ¬Spotify.proxies=[]proxyNames|^.*$
        - proxy-groups.ğŸ¬å›½å¤–åª’ä½“.proxies=[]proxyNames|^.*$
        - proxy-groups.ğŸ¬Spotify.proxies.0+DIRECT

      prepend-rules: # è§„åˆ™ç”±ä¸Šå¾€ä¸‹éå†ï¼Œå¦‚ä¸Šé¢è§„åˆ™å·²ç»å‘½ä¸­ï¼Œåˆ™ä¸å†å¾€ä¸‹å¤„ç†
        - DOMAIN,clash.razord.top,DIRECT
        - DOMAIN,yacd.haishan.me,DIRECT
        - RULE-SET,Direct,DIRECT
        - RULE-SET,Advertising_Classical,REJECT
        - RULE-SET,YouTube,ğŸ¬YouTube
        - RULE-SET,YouTubeMusic,ğŸ¬YouTube
        - RULE-SET,Spotify,ğŸ¬Spotify
        - RULE-SET,Google,ğŸ”°å›½å¤–æµé‡
        - RULE-SET,Microsoft,ğŸ’»å¾®è½¯æœåŠ¡
        - RULE-SET,GlobalMedia,ğŸ¬å›½å¤–åª’ä½“
        - RULE-SET,Global,ğŸ”°å›½å¤–æµé‡
        - RULE-SET,Apple,ğŸè‹¹æœæœåŠ¡
        - RULE-SET,China,DIRECT
        - GEOIP,CN,DIRECT
        - MATCH,âš“ï¸å…¶ä»–æµé‡

      mix-rule-providers:
        Direct:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Direct/Direct.yaml"
          path: ./ruleset/Direct.yaml
          interval: 86400

        Advertising_Classical:
          type: http
          behavior: classical
          url: "https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Advertising/Advertising_Classical.yaml"
          path: ./ruleset/Advertising_Classical.yaml
          interval: 86400

        YouTube:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/YouTube/YouTube.yaml"
          path: ./ruleset/YouTube.yaml
          interval: 86400

        YouTubeMusic:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/YouTubeMusic/YouTubeMusic.yaml"
          path: ./ruleset/YouTubeMusic.yaml
          interval: 86400

        Spotify:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Spotify/Spotify.yaml"
          path: ./ruleset/Spotify.yaml
          interval: 86400

        Google:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Google/Google.yaml"
          path: ./ruleset/Google.yaml
          interval: 86400

        Microsoft:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Microsoft/Microsoft.yaml"
          path: ./ruleset/Microsoft.yaml
          interval: 86400

        GlobalMedia:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/GlobalMedia/GlobalMedia_Classical.yaml"
          path: ./ruleset/GlobalMedia_Classical.yaml
          interval: 86400

        Global:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Global/Global_Classical.yaml"
          path: ./ruleset/Global_Classical.yaml
          interval: 86400

        Apple:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Apple/Apple.yaml"
          path: ./ruleset/Apple.yaml
          interval: 86400

        China:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/China/China_Classical.yaml"
          path: ./ruleset/China_Classical.yaml
          interval: 86400